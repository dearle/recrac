                             /////////////////////////////
                            // Database intialization. //
                           /////////////////////////////


 /////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////// Requirements //////////////////////////////////////

// Includes mongoose ODM (Object Document Mapper) for more elegant object creation 
// and manipulation using MongoDB.
const mongoose = require('mongoose');

// Creating a variable to point to the provided databases location (from Heroku) 
// or the local database
const uri = process.env.MONGODB_URI || 'mongodb://localhost/GreenfieldDB';


 /////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////


 /////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////// Connect Database //////////////////////////////////


// Connect to heroku hosted (or if not availabe) local MongoDB database.
mongoose.connect(uri);

// Connection Events:

// Assign mongoose connection to a variable name (db)
const db = mongoose.connection

// If the connection produces an error
db.on('error', (err) => console.error('Mongo connection problem:', err));

// If the connection is sucessfully opened let me know
db.once('open', () => console.log('Mongo connection sucessful!'));


 /////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////


 /////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////// Export Database ///////////////////////////////////


// Export our database connection for use in our app
module.exports = db
